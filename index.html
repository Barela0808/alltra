<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Expense Tracker</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }
    body {
      background: #f0f2f5;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .balance-section {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .balance-edit {
      display: none;
    }
    .form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 20px;
    }
    .form input, .form select {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .form button {
      grid-column: span 2;
      padding: 10px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .transactions {
      margin-top: 20px;
    }
    .transaction {
      background: #f9f9f9;
      padding: 10px;
      border-left: 5px solid #007bff;
      margin-bottom: 10px;
      position: relative;
    }
    .transaction .delete {
      position: absolute;
      right: 10px;
      top: 10px;
      color: red;
      cursor: pointer;
    }
    .download-btn {
      background: green;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Expense Tracker</h1>
    <div class="balance-section">
      <h2>Balance: ₹<span id="balance">0</span></h2>
      <div>
        <button onclick="toggleEdit()">Edit</button>
        <div class="balance-edit">
          <input type="number" id="editBalance" placeholder="Enter Balance">
          <button onclick="saveBalance()">Save</button>
        </div>
      </div>
    </div><form class="form" onsubmit="addTransaction(event)">
  <select id="type">
    <option value="shop">Shop</option>
    <option value="cab">Cab</option>
    <option value="website">Website</option>
    <option value="transport">Transport</option>
  </select>
  <input type="text" id="title" placeholder="Name/Details" required />
  <input type="text" id="transactionId" placeholder="Transaction ID" required />
  <input type="text" id="extra" placeholder="Extra Info (Product/Company/Website)" />
  <input type="number" id="amount" placeholder="Amount" required />
  <input type="datetime-local" id="datetime" required />
  <button type="submit">Add Transaction</button>
</form>

<div class="transactions" id="transactions"></div>
<button class="download-btn" onclick="downloadPDF()">Download PDF</button>

  </div>  <script>
    let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
    let balance = parseFloat(localStorage.getItem('balance')) || 0;

    function updateBalanceDisplay() {
      document.getElementById("balance").innerText = balance.toFixed(2);
    }

    function saveBalance() {
      const newBalance = parseFloat(document.getElementById("editBalance").value);
      if (!isNaN(newBalance)) {
        balance = newBalance;
        localStorage.setItem("balance", balance);
        updateBalanceDisplay();
        document.querySelector(".balance-edit").style.display = "none";
      }
    }

    function toggleEdit() {
      const editBox = document.querySelector(".balance-edit");
      editBox.style.display = editBox.style.display === "none" ? "block" : "none";
    }

    function addTransaction(event) {
      event.preventDefault();
      const type = document.getElementById("type").value;
      const title = document.getElementById("title").value;
      const transactionId = document.getElementById("transactionId").value;
      const extra = document.getElementById("extra").value;
      const amount = parseFloat(document.getElementById("amount").value);
      const datetime = document.getElementById("datetime").value;

      const entry = { id: Date.now(), type, title, transactionId, extra, amount, datetime };
      transactions.push(entry);
      balance -= amount;

      localStorage.setItem("transactions", JSON.stringify(transactions));
      localStorage.setItem("balance", balance);

      renderTransactions();
      updateBalanceDisplay();
      event.target.reset();
    }

    function deleteTransaction(id) {
      const entry = transactions.find(t => t.id === id);
      if (entry) balance += entry.amount;
      transactions = transactions.filter(t => t.id !== id);
      localStorage.setItem("transactions", JSON.stringify(transactions));
      localStorage.setItem("balance", balance);
      renderTransactions();
      updateBalanceDisplay();
    }

    function renderTransactions() {
      const list = document.getElementById("transactions");
      list.innerHTML = "";
      transactions.forEach(t => {
        const div = document.createElement("div");
        div.className = "transaction";
        div.innerHTML = `
          <strong>${t.type.toUpperCase()}</strong><br>
          ${t.title} | ₹${t.amount} <br>
          ${t.transactionId} | ${t.extra} <br>
          ${t.datetime}<br>
          <span class="delete" onclick="deleteTransaction(${t.id})">✖</span>
        `;
        list.appendChild(div);
      });
    }

    function downloadPDF() {
      let content = Balance: ₹${balance.toFixed(2)}\n\n;
      transactions.forEach(t => {
        content += Type: ${t.type}\nTitle: ${t.title}\nAmount: ₹${t.amount}\nTransaction ID: ${t.transactionId}\nExtra: ${t.extra}\nDate/Time: ${t.datetime}\n\n;
      });

      const blob = new Blob([content], { type: "application/pdf" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "transactions.pdf";
      link.click();
    }

    renderTransactions();
    updateBalanceDisplay();
  </script></body>
</html>
